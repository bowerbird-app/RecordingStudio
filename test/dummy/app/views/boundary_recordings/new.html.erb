<% content_for :title, "Add Boundary" %>

<%= render FlatPack::Breadcrumb::Component.new(class: "mb-4") do |breadcrumb| %>
  <% breadcrumb.item(text: "Home", href: root_path) %>
  <% breadcrumb.item(text: recordable_label(@parent_recording.recordable), href: (@return_to || recording_path(@parent_recording))) %>
  <% breadcrumb.item(text: "Boundary") %>
<% end %>

<div class="mx-auto max-w-2xl">
  <%= render FlatPack::Card::Component.new(class: "mb-6") do |card| %>
    <% card.header(divider: false) do %>
      <div class="space-y-2">
        <h2 class="text-xl font-semibold">Boundary access</h2>
        <p class="text-sm text-slate-500">Set the default minimum role for content below <%= recordable_label(@parent_recording.recordable) %>.</p>
      </div>
    <% end %>

    <% card.body do %>
      <%= form_with url: boundary_recordings_path, method: :post, local: true, class: "space-y-6" do |form| %>
        <%= hidden_field_tag :parent_recording_id, @parent_recording.id %>
        <%= hidden_field_tag :return_to, @return_to if @return_to.present? %>

        <%= render FlatPack::RadioGroup::Component.new(
          name: "minimum_role",
          label: "Default minimum role",
          options: [
            ["None", ""],
            ["View", "view"],
            ["Edit", "edit"],
            ["Admin", "admin"]
          ],
          value: @boundary.minimum_role.to_s
        ) %>

        <div class="rounded-lg border border-slate-200 bg-slate-50 p-4 text-sm text-slate-700">
          This boundary sets the default minimum role. You can still add specific users or system actors below this boundary to grant them access when needed.
        </div>

        <div class="flex items-center gap-3">
          <%= form.submit "Save boundary", class: "rounded-md bg-slate-900 px-4 py-2 text-sm font-medium text-white" %>
          <%= link_to "Cancel", (@return_to || recording_path(@parent_recording)), class: "text-sm font-medium text-slate-500" %>
        </div>
      <% end %>
    <% end %>
  <% end %>
</div>
