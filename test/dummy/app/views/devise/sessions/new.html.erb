<div class="mx-auto w-full max-w-md px-4 py-12">
  <%= render FlatPack::Card::Component.new(style: :elevated) do |card| %>
    <% card.header do %>
      <h1 class="text-xl font-semibold text-slate-900">Log in</h1>
    <% end %>

    <% card.body do %>
      <% prefill_credentials = Rails.env.development? || Rails.env.test? %>
      <% prefill_email = prefill_credentials ? ENV.fetch("DUMMY_SIGN_IN_EMAIL", "admin@example.com") : nil %>
      <% prefill_password = prefill_credentials ? ENV.fetch("DUMMY_SEED_PASSWORD", "change-me-please") : nil %>

      <%= form_with(model: resource, as: resource_name, url: session_path(resource_name), data: { turbo: false }, class: "space-y-4") do |f| %>
        <%= render FlatPack::EmailInput::Component.new(
          name: "#{resource_name}[email]",
          label: "Email",
          value: prefill_email,
          required: true,
          autofocus: true,
          autocomplete: "email"
        ) %>

        <%= render FlatPack::PasswordInput::Component.new(
          name: "#{resource_name}[password]",
          label: "Password",
          value: prefill_password,
          required: true,
          autocomplete: "current-password"
        ) %>

        <div class="flex items-center justify-between">
          <% if devise_mapping.rememberable? %>
            <%= render FlatPack::Checkbox::Component.new(
              name: "#{resource_name}[remember_me]",
              label: "Remember me",
              value: "1",
              checked: resource&.remember_me
            ) %>
          <% end %>

          <%= f.submit "Log in", class: "inline-flex items-center rounded-md bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500" %>
        </div>
      <% end %>
    <% end %>
  <% end %>

</div>
